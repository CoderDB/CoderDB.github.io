---
layout: post
date: 2017-01-28
title: Haskell ä¸­çš„ Function Composition
feature-img: "img/orange.jpg"
---

$$(f \circ g)(x) = f(g(x))$$
---

æ•°å­¦ä¸­ $$(f \circ g)$$ è¿™æ ·è¡¨ç¤ºå°† f g ä¸¤ä¸ªå‡½æ•°å¤åˆï¼ŒHaskell ä¸­çš„å‡½æ•°ç»„åˆä¸æ•°å­¦ä¸­çš„ä¸€æ ·ï¼Œåªä¸è¿‡ä¸ç”¨ $$ \circ $$ è€Œæ˜¯ç”¨ä¸€ä¸ªç‚¹ã€‚ä¸¾ä¸ªä¾‹å­ ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°

{% highlight haskell %}
ghci> (length.tail) "haskell"
6
{% endhighlight %}

f.g å®é™…ä¸Šå°±æ˜¯åŒ¿åå‡½æ•°ã€‚æ¯”å¦‚ f.g çš„å®ç°äº‹å®ä¸Šå°±æ˜¯è¿™æ ·ï¼š

{% highlight haskell %}
f.g = \x -> f (g x)
{% endhighlight %}

**å‡½æ•°ç»„åˆå¯ä»¥åŒæ—¶ç»„åˆå¤šä¸ªå‡½æ•°**ã€‚æ¯”å¦‚ $$f \circ g \circ z$$ ç”¨ Haskell å®ç°å°±æ˜¯ f (g (z x)) ä¸¾ä¸ªä¾‹å­

{% highlight haskell %}
ghci> (negate.sum.tail) [1, 2, 3]
-5
-- å…ˆåš tail [1, 2, 3] => [2, 3]
-- ç„¶å sum [2, 3]     => 5
-- æœ€å negate 5       => -5
{% endhighlight %}

**negate** å–ä¸€ä¸ªæ•°çš„ç›¸åæ•°ã€‚

{% highlight haskell %}
ghci> :t negate
negate :: Num a => a -> a

ghci> negate 0
0

ghci> negate 5
-5

ghci> negate (-(-20))
-20
{% endhighlight %}

å‡½æ•°ç»„åˆæ˜¯å³ç»“åˆçš„ï¼Œä½†æ˜¯æŠŠ f (g (z x)) å®ç°æˆ (f.g.z) x æ€»æ„Ÿè§‰ä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œåƒæ˜¯å…ˆæŠŠ f.g.z åˆæˆä¸€ä¸ªæ–°çš„å‡½æ•°å†ç”¨ x å»å‘¼å«ä¸€æ ·ã€‚æœ‰ä¸€ç§æ–¹æ³•æˆ–è®¸å¥½ä¸€ç‚¹ï¼Œé‚£å°±æ˜¯ç”¨ **$** ç¬¦å·ï¼Œ f (g (z x)) å°±å¯ä»¥å†™æˆ f $ g $ z x ã€‚ä¸Šè¿°çš„ä¾‹å­å°±å¯ä»¥æ”¹å†™ä¸ºï¼š

{% highlight haskell %}
ghci> negate $ sum $ tail [1, 2, 3]
-5
{% endhighlight %}

**$** æ˜¯ *å‡½æ•°å‘¼å«ç¬¦*ã€‚å®ƒçš„ä¼˜å…ˆçº§æœ€ä½ï¼Œç©ºæ ¼å‘¼å«çš„å‡½æ•°æ˜¯å·¦ç»“åˆçš„ï¼Œè€Œ **$** å‘¼å«çš„å‡½æ•°æ˜¯å³ç»“åˆçš„ã€‚æ¯”å¦‚ f x y z æ˜¯å·¦ç»“åˆå³ï¼š((f x) y) z ï¼Œå¦‚æœç”¨ **$** å‘¼å«çš„è¯åº”è¯¥æ˜¯è¿™æ ·ï¼šf (x (y z)) å› ä¸ºå®ƒæ˜¯å³ç»“åˆçš„ã€‚**$** çœ‹ä¸Šå»åƒæ˜¯èµ·ä¸€å¯¹æ‹¬å·çš„ä½œç”¨ã€‚ğŸ˜¹ğŸ˜¹ğŸ˜¹ğŸ˜¹ğŸ˜¹ğŸ˜¹

**å‡½æ•°ç»„åˆä¹Ÿèƒ½å¤Ÿåº”ç”¨äºéœ€è¦å¤šä¸ªå‚æ•°çš„å‡½æ•°**ã€‚ä¹‹æ‰€ä»¥èƒ½è¡Œå°±æ˜¯å› ä¸ºå‡½æ•°çš„ *ä¸å…¨å‘¼å«*ï¼Œäº‹å®ä¸Šæ²¡æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°ğŸ˜¸ğŸ˜¸ğŸ˜¸ğŸ˜¸ğŸ˜¸

{% highlight haskell %}
ghci> take 5 . replicate 10 $ 8
[8,8,8,8,8]

ghci> take 5 $ replicate 10 $ 8
[8,8,8,8,8]

ghci> take 5 (replicate 10 8)
[8,8,8,8,8]
{% endhighlight %}
